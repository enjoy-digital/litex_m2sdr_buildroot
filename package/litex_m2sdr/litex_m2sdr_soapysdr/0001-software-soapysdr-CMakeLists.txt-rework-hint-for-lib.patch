From d8542e68ef84051ab346f949f93d96c06329522f Mon Sep 17 00:00:00 2001
From: Gwenhael Goavec-Merou <gwenhael@enjoy-digital.fr>
Date: Fri, 25 Apr 2025 15:42:49 +0200
Subject: [PATCH] software/soapysdr/CMakeLists.txt: rework hint for
 libraries/headers detect

---
 litex_m2sdr/software/soapysdr/CMakeLists.txt | 34 ++++++++++----------
 1 file changed, 17 insertions(+), 17 deletions(-)

diff --git a/litex_m2sdr/software/soapysdr/CMakeLists.txt b/litex_m2sdr/software/soapysdr/CMakeLists.txt
index 4ef2b3a..f70c04a 100644
--- a/litex_m2sdr/software/soapysdr/CMakeLists.txt
+++ b/litex_m2sdr/software/soapysdr/CMakeLists.txt
@@ -12,22 +12,22 @@ option(USE_LITEETH "Uses Ethernet interface for control and streaming" OFF)
 find_path(LITEPCIE_KERNEL_INCLUDE_DIR litepcie.h
           REQUIRED
           HINTS
-            ${CMAKE_CURRENT_SOURCE_DIR}/../..
+            ${CMAKE_CURRENT_SOURCE_DIR}/../../software
           PATH_SUFFIXES
-            software/kernel)
+            kernel)
 find_path(LITEPCIE_USER_INCLUDE_DIR liblitepcie.h
           REQUIRED
           HINTS
-            ${CMAKE_CURRENT_SOURCE_DIR}/../..
+            ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
           PATH_SUFFIXES
-            software/user/liblitepcie)
+            liblitepcie)
 set(LITEPCIE_INCLUDE_DIR ${LITEPCIE_KERNEL_INCLUDE_DIR} ${LITEPCIE_USER_INCLUDE_DIR})
 find_library(LITEPCIE_LIBRARY litepcie
              REQUIRED
              HINTS
-               ${CMAKE_CURRENT_SOURCE_DIR}/../..
+               ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
              PATH_SUFFIXES
-               software/user/liblitepcie)
+               liblitepcie)
 
 include_directories(${LITEPCIE_INCLUDE_DIR})
 
@@ -38,9 +38,9 @@ include_directories(${LITEPCIE_INCLUDE_DIR})
 find_path(LITEETH_INCLUDE_DIR etherbone.h
           REQUIRED
           HINTS
-            ${CMAKE_CURRENT_SOURCE_DIR}/../..
+            ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
           PATH_SUFFIXES
-            software/user/libliteeth)
+            libliteeth)
 
 include_directories(${LITEETH_INCLUDE_DIR})
 
@@ -48,12 +48,12 @@ include_directories(${LITEETH_INCLUDE_DIR})
 ## USER discovery
 ########################################################################
 
-find_path(USER_INCLUDE_DIR libm2sdr/m2sdr_config.h
+find_path(USER_INCLUDE_DIR m2sdr_config.h
           REQUIRED
           HINTS
-            ${CMAKE_CURRENT_SOURCE_DIR}/../..
+            ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
           PATH_SUFFIXES
-            software/user)
+            libm2sdr)
 
 include_directories(${USER_INCLUDE_DIR})
 
@@ -64,9 +64,9 @@ include_directories(${USER_INCLUDE_DIR})
 find_path(AD9361_INCLUDE_DIR ad9361.h
           REQUIRED
           HINTS
-            ${CMAKE_CURRENT_SOURCE_DIR}/../..
+            ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
           PATH_SUFFIXES
-            software/user/ad9361)
+            ad9361)
 
 include_directories(${AD9361_INCLUDE_DIR})
 
@@ -77,18 +77,18 @@ include_directories(${AD9361_INCLUDE_DIR})
 find_path(LIBM2SDR_INCLUDE_DIR libm2sdr.h
           REQUIRED
           HINTS
-            ${CMAKE_CURRENT_SOURCE_DIR}/../..
+            ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
           PATH_SUFFIXES
-            software/user/libm2sdr)
+            libm2sdr)
 
 include_directories(${LIBM2SDR_INCLUDE_DIR})
 
 find_library(LIBM2SDR_LIBRARY m2sdr
              REQUIRED
              HINTS
-               ${CMAKE_CURRENT_SOURCE_DIR}/../..
+               ${CMAKE_CURRENT_SOURCE_DIR}/../../software/user
              PATH_SUFFIXES
-               software/user/libm2sdr)
+               libm2sdr)
 
 ########################################################################
 ## SoapySDR library
-- 
2.49.0

